apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: cccccc-v2quorum
  namespace: ccc-quo
  annotations:
    fluxcd.io/automated: "false"
spec:
  releaseName: cccccc-v2quorum
  helmVersion: v3
  chart:
    git: https://github.com/liubaninc/bevel.git
    ref: local10
    path: platforms/quorum/charts/node_quorum_validator  
  values:
    replicaCount: 1
    metadata:
      namespace: ccc-quo
      labels:
    images:
      node: quorumengineering/quorum:21.4.2
      alpineutils: index.docker.io/hyperledgerlabs/alpine-utils:1.0
      tessera: quorumengineering/tessera:21.4.0
      busybox: busybox
      mysql: mysql/mysql-server:5.7
    node:
      name: ccc-v2
      status: default
      consensus: ibft
      subject: O=ccc-v2,OU=ccc-v2,L=42.36/-71.06/Boston,C=US
      mountPath: /etc/quorum/qdata
      imagePullSecret: regcred
      keystore: keystore_1
      
      servicetype: ClusterIP
      lock: false
      ports:
        rpc: 8546
        raft: 50401
        tm: 443
        quorum: 21000
        db: 3306
        cakeshop: 8080
      dbname: demodb
      mysqluser: demouser
    vault:
      address: http://101.36.106.59:8200
      secretprefix: secretsv2/data/ccc-quo/crypto/ccc-v2
      serviceaccountname: vault-auth
      keyname: quorum
      tm_keyname: transaction
      role: vault-role
      authpath: quorumccc
    tessera:
      dburl: "jdbc:mysql://ccc-v2-tessera:3306/demodb"
      dbusername: demouser
      url: "https://ccc-v2.test.blockchain.liubaninc.cn:443"
      clienturl: "http://ccc-v2-tessera:8888" #TODO: Enable tls strict for q2t
      othernodes:
        - url: https://ccc-v0.test.blockchain.liubaninc.cn
        - url: https://ccc-v1.test.blockchain.liubaninc.cn
        - url: https://ccc-v2.test.blockchain.liubaninc.cn
        - url: https://ccc-m0.test.blockchain.liubaninc.cn
      tls: "STRICT"
      trust: "TOFU"
    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDEwLAogICAgImhvbWVzdGVhZEJsb2NrIjogMCwKICAgICJlaXAxNTBCbG9jayI6IDAsCiAgICAiZWlwMTUwSGFzaCI6ICIweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiLAogICAgImVpcDE1NUJsb2NrIjogMCwKICAgICJlaXAxNThCbG9jayI6IDAsCiAgICAiYnl6YW50aXVtQmxvY2siOiAwLAogICAgImNvbnN0YW50aW5vcGxlQmxvY2siOiAwLAogICAgInBldGVyc2J1cmdCbG9jayI6IDAsCiAgICAiaXN0YW5idWxCbG9jayI6IDAsCiAgICAiaXN0YW5idWwiOiB7CiAgICAgICJlcG9jaCI6IDMwMDAwLAogICAgICAicG9saWN5IjogMCwKICAgICAgImNlaWwyTmJ5M0Jsb2NrIjogMAogICAgfSwKICAgICJ0eG5TaXplTGltaXQiOiAxMjgsCiAgICAicWlwNzE0QmxvY2siOiAwLAogICAgImlzTVBTIjogZmFsc2UsCiAgICAiaXNRdW9ydW0iOiB0cnVlLAogICAgIm1heENvZGVTaXplQ29uZmlnIjogWwogICAgICB7CiAgICAgICAgImJsb2NrIjogMCwKICAgICAgICAic2l6ZSI6IDEyOAogICAgICB9CiAgICBdCiAgfSwKICAibm9uY2UiOiAiMHgwIiwKICAidGltZXN0YW1wIjogIjB4NjFkZDQzNmIiLAogICJleHRyYURhdGEiOiAiMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwZjg5YWY4NTQ5NGQxMzIxZjZjZmM4MWQwMGVhN2NkNmNkZGI4YjE0NWE2NmY2MTM3OGM5NDI5ZWE5M2JjZDQzMWVhMWE5N2IxMTdjNjJmMGZjMTlmZmRmYjQwNGY5NDM0NmY0OGM1ZDkxZjlkMjI5MzY0YWQzMGRjYmFiZDFkMTNhNjVhOGQ5NDBjNTU5MGQ2ZjdiZTJjNWVjY2E3Zjg1NmZhYmQ5YmMzZDE0MzFiZDJiODQxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGMwIiwKICAiZ2FzTGltaXQiOiAiMHhlMDAwMDAwMCIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAibWl4SGFzaCI6ICIweDYzNzQ2OTYzNjE2YzIwNjI3OTdhNjE2ZTc0Njk2ZTY1MjA2NjYxNzU2Yzc0MjA3NDZmNmM2NTcyNjE2ZTYzNjUiLAogICJjb2luYmFzZSI6ICIweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiLAogICJhbGxvYyI6IHsKICAgICIwYzU1OTBkNmY3YmUyYzVlY2NhN2Y4NTZmYWJkOWJjM2QxNDMxYmQyIjogewogICAgICAiYmFsYW5jZSI6ICIweDQ0NmMzYjE1Zjk5MjY2ODdkMmM0MDUzNGZkYjU2NDAwMDAwMDAwMDAwMCIKICAgIH0sCiAgICAiMjllYTkzYmNkNDMxZWExYTk3YjExN2M2MmYwZmMxOWZmZGZiNDA0ZiI6IHsKICAgICAgImJhbGFuY2UiOiAiMHg0NDZjM2IxNWY5OTI2Njg3ZDJjNDA1MzRmZGI1NjQwMDAwMDAwMDAwMDAiCiAgICB9LAogICAgIjM0NmY0OGM1ZDkxZjlkMjI5MzY0YWQzMGRjYmFiZDFkMTNhNjVhOGQiOiB7CiAgICAgICJiYWxhbmNlIjogIjB4NDQ2YzNiMTVmOTkyNjY4N2QyYzQwNTM0ZmRiNTY0MDAwMDAwMDAwMDAwIgogICAgfSwKICAgICJkMTMyMWY2Y2ZjODFkMDBlYTdjZDZjZGRiOGIxNDVhNjZmNjEzNzhjIjogewogICAgICAiYmFsYW5jZSI6ICIweDQ0NmMzYjE1Zjk5MjY2ODdkMmM0MDUzNGZkYjU2NDAwMDAwMDAwMDAwMCIKICAgIH0KICB9LAogICJudW1iZXIiOiAiMHgwIiwKICAiZ2FzVXNlZCI6ICIweDAiLAogICJwYXJlbnRIYXNoIjogIjB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCIKfQ==
    staticnodes: 
      [
    "enode://cbe197de010662096d798b2c7908ab392dbb93944c133ac6dacb4c7ccb6ad5627587c7277eb8da8994eaaf808745e34e846f665a1c66c773c1bcc5b97551948e@ccc-v0.test.blockchain.liubaninc.cn:15910?discport=0",
    "enode://7ebee037066b670920b65abf8904c10635546f0b8df97220dbdb63de4a5b7bab5674fc8cbbc8fbf00d41c2ae1ee701ee2c2216f4dfc168a10fd54269c499faed@ccc-v1.test.blockchain.liubaninc.cn:15920?discport=0",
    "enode://15535e9bcc62c907a001a124348ed8f1dc1557a472f76d9a7a9176bfdb2954f256e6221b2290aa824599640ddb06c0b424eb0cffbc1565946d2ab98da2e6b789@ccc-v2.test.blockchain.liubaninc.cn:15930?discport=0",
    "enode://30cd1974b0411d0b05d70965147ca02fc1e6296cdd4e2da337ca70b48f32fdafff1dad8b2ae7199c5ec0b1cd6e7c463c710e4d82cf98ed0e0d0557b9e7a5daeb@ccc-m0.test.blockchain.liubaninc.cn:15900?discport=0"
]
    proxy:
      provider: "ambassador"
      external_url: ccc-v2.test.blockchain.liubaninc.cn
      portTM: 443
      rpcport: 15931
      quorumport: 15930
      cakeshopport: 15934
    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi
      dbstorage: 1Gi
